<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/4b76110e/css/bootstrap.css" rel="stylesheet">
<link href="./assets/710de68d/style.css" rel="stylesheet">
<script src="./assets/75e46bf0/jquery.js"></script>
<script src="./assets/4b76110e/js/bootstrap.js"></script>
<script src="./assets/a44c75fa/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w74" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w74-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii Framework 2.0 API Documentation</a></div><div id="w74-collapse" class="collapse navbar-collapse"><ul id="w75" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li><a href="./guide-en-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Upgrading from Yii 1.1 <a href="#upgrading-from-yii-11" name="upgrading-from-yii-11" class="hashlink">&para;</a></h1><p>In this chapter, we list the major changes introduced in Yii 2.0 since version 1.1.
We hope this list will make it easier for you to upgrade from Yii 1.1 and quickly
master Yii 2.0 based on your existing Yii knowledge.</p>
<h2>Namespace <a href="#namespace" name="namespace" class="hashlink">&para;</a></h2><p>The most obvious change in Yii 2.0 is the use of namespaces. Almost every core class
is namespaced, e.g., <code>yii\web\Request</code>. The "C" prefix is no longer used in class names.
The naming of the namespaces follows the directory structure. For example, <code>yii\web\Request</code>
indicates the corresponding class file is <code>web/Request.php</code> under the Yii framework folder.
You can use any core class without explicitly including that class file, thanks to the Yii
class loader.</p>
<h2>Component and Object <a href="#component-and-object" name="component-and-object" class="hashlink">&para;</a></h2><p>Yii 2.0 breaks the <code>CComponent</code> class in 1.1 into two classes: <code>Object</code> and <code>Component</code>.
The <code>Object</code> class is a lightweight base class that allows defining class properties
via getters and setters. The <code>Component</code> class extends from <code>Object</code> and supports
the event feature and the behavior feature.</p>
<p>If your class does not need the event or behavior feature, you should consider using
<code>Object</code> as the base class. This is usually the case for classes that represent basic
data structures.</p>
<p>More details about Object and component can be found in the <a href="guide-en-basics.html">Basic concepts section</a>.</p>
<h2>Object Configuration <a href="#object-configuration" name="object-configuration" class="hashlink">&para;</a></h2><p>The <code>Object</code> class introduces a uniform way of configuring objects. Any descendant class
of <code>Object</code> should declare its constructor (if needed) in the following way so that
it can be properly configured:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">extends&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Object<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$param1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$param2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$config&nbsp;</span><span style="color: #007700">=&nbsp;[])<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...&nbsp;initialization&nbsp;before&nbsp;configuration&nbsp;is&nbsp;applied<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$config</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...&nbsp;initialization&nbsp;after&nbsp;configuration&nbsp;is&nbsp;applied<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}</span></code></pre>
<p>In the above, the last parameter of the constructor must take a configuration array
which contains name-value pairs for initializing the properties at the end of the constructor.
You can override the <code>init()</code> method to do initialization work that should be done after
the configuration is applied.</p>
<p>By following this convention, you will be able to create and configure a new object
using a configuration array like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB">$object&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">createObject</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'MyClass'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'property1'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'property2'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'cde'</span><span style="color: #007700">,<br />],&nbsp;</span><span style="color: #0000BB">$param1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$param2</span><span style="color: #007700">);</span></code></pre>
<p>More on configuration can be found in the <a href="guide-en-basics.html">Basic concepts section</a>.</p>
<h2>Events <a href="#events" name="events" class="hashlink">&para;</a></h2><p>There is no longer the need to define an <code>on</code>-method in order to define an event in Yii 2.0.
Instead, you can use whatever event names. To attach a handler to an event, you should
use the <code>on</code> method now:</p>
<pre><code class="language-php"><span style="color: #0000BB">$component</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">on</span><span style="color: #007700">(</span><span style="color: #0000BB">$eventName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$handler</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;To&nbsp;detach&nbsp;the&nbsp;handler,&nbsp;use:<br />//&nbsp;$component-&gt;off($eventName,&nbsp;$handler);</span></code></pre>
<p>When you attach a handler, you can now associate it with some parameters which can be later
accessed via the event parameter by the handler:</p>
<pre><code class="language-php"><span style="color: #0000BB">$component</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">on</span><span style="color: #007700">(</span><span style="color: #0000BB">$eventName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$handler</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">);</span></code></pre>
<p>Because of this change, you can now use "global" events. Simply trigger and attach handlers to
an event of the application instance:</p>
<pre><code class="language-php"><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">on</span><span style="color: #007700">(</span><span style="color: #0000BB">$eventName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$handler</span><span style="color: #007700">);<br />....<br /></span><span style="color: #FF8000">//&nbsp;this&nbsp;will&nbsp;trigger&nbsp;the&nbsp;event&nbsp;and&nbsp;cause&nbsp;$handler&nbsp;to&nbsp;be&nbsp;invoked.<br /></span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">trigger</span><span style="color: #007700">(</span><span style="color: #0000BB">$eventName</span><span style="color: #007700">);</span></code></pre>
<p>If you need to handle all instances of a class instead of the object you can attach a handler like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB">Event</span><span style="color: #007700">::</span><span style="color: #0000BB">on</span><span style="color: #007700">(</span><span style="color: #0000BB">ActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">className</span><span style="color: #007700">(),&nbsp;</span><span style="color: #0000BB">ActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">EVENT_AFTER_INSERT</span><span style="color: #007700">,&nbsp;function&nbsp;(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">trace</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sender</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;is&nbsp;inserted.'</span><span style="color: #007700">);<br />});</span></code></pre>
<p>The code above defines a handler that will be triggered for every Active Record object's <code>EVENT_AFTER_INSERT</code> event.</p>
<p>See <a href="guide-en-events.html">Event handling section</a> for more details.</p>
<h2>Path Alias <a href="#path-alias" name="path-alias" class="hashlink">&para;</a></h2><p>Yii 2.0 expands the usage of path aliases to both file/directory paths and URLs. An alias
must start with a <code>@</code> character so that it can be differentiated from file/directory paths and URLs.
For example, the alias <code>@yii</code> refers to the Yii installation directory. Path aliases are
supported in most places in the Yii core code. For example, <code>FileCache::cachePath</code> can take
both a path alias and a normal directory path.</p>
<p>Path alias is also closely related with class namespaces. It is recommended that a path
alias be defined for each root namespace so that you can use Yii the class autoloader without
any further configuration. For example, because <code>@yii</code> refers to the Yii installation directory,
a class like <code>yii\web\Request</code> can be autoloaded by Yii. If you use a third party library
such as Zend Framework, you may define a path alias <code>@Zend</code> which refers to its installation
directory and Yii will be able to autoload any class in this library.</p>
<p>More on path aliases can be found in the <a href="guide-en-basics.html">Basic concepts section</a>.</p>
<h2>View <a href="#view" name="view" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces a <code>View</code> class to represent the view part of the MVC pattern.
It can be configured globally through the "view" application component. It is also
accessible in any view file via <code>$this</code>. This is one of the biggest changes compared to 1.1:
<strong><code>$this</code> in a view file no longer refers to the controller or widget object.</strong>
It refers to the view object that is used to render the view file. To access the controller
or the widget object, you have to use <code>$this-&gt;context</code> now.</p>
<p>Because you can access the view object through the "view" application component,
you can now render a view file like the following anywhere in your code, not necessarily
in controllers or widgets:</p>
<pre><code class="language-php"><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">view</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">renderFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$viewFile</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;You&nbsp;can&nbsp;also&nbsp;explicitly&nbsp;create&nbsp;a&nbsp;new&nbsp;View&nbsp;instance&nbsp;to&nbsp;do&nbsp;the&nbsp;rendering<br />//&nbsp;$view&nbsp;=&nbsp;new&nbsp;View;<br />//&nbsp;$view-&gt;renderFile($viewFile,&nbsp;$params);</span></code></pre>
<p>Also, there is no more <code>CClientScript</code> in Yii 2.0. The <code>View</code> class has taken over its role
with significant improvements. For more details, please see the "assets" subsection.</p>
<p>While Yii 2.0 continues to use PHP as its main template language, it comes with two official extensions
adding support for two popular template engines: Smarty and Twig. The Prado template engine is
no longer supported. To use these template engines, you just need to use <code>tpl</code> as the file
extension for your Smarty views, or <code>twig</code> for Twig views. You may also configure the
<code>View::renderers</code> property to use other template engines. See <a href="guide-en-template.html">Using template engines</a> section
of the guide for more details.</p>
<p>See <a href="guide-en-view.html">View section</a> for more details.</p>
<h2>Models <a href="#models" name="models" class="hashlink">&para;</a></h2><p>A model is now associated with a form name returned by its <code>formName()</code> method. This is
mainly used when using HTML forms to collect user inputs for a model. Previously in 1.1,
this is usually hardcoded as the class name of the model.</p>
<p>A new methods called <code>load()</code> and <code>Model::loadMultiple()</code> is introduced to simplify the data population from user inputs
to a model. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Post</span><span style="color: #007700">;<br />if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">))&nbsp;{...}<br /></span><span style="color: #FF8000">//&nbsp;which&nbsp;is&nbsp;equivalent&nbsp;to:<br /></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'Post'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'Post'</span><span style="color: #007700">];<br />}<br /><br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$postTags&nbsp;</span><span style="color: #007700">=&nbsp;[];<br /></span><span style="color: #0000BB">$tagsCount&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'PostTag'</span><span style="color: #007700">]);<br />while&nbsp;(</span><span style="color: #0000BB">$tagsCount</span><span style="color: #007700">--&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$postTags</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">PostTag</span><span style="color: #007700">([</span><span style="color: #DD0000">'post_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">]);<br />}<br /></span><span style="color: #0000BB">Model</span><span style="color: #007700">::</span><span style="color: #0000BB">loadMultiple</span><span style="color: #007700">(</span><span style="color: #0000BB">$postTags</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">);</span></code></pre>
<p>Yii 2.0 introduces a new method called <code>scenarios()</code> to declare which attributes require
validation under which scenario. Child classes should overwrite <code>scenarios()</code> to return
a list of scenarios and the corresponding attributes that need to be validated when
<code>validate()</code> is called. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'backend'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'role'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'frontend'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'!name'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>This method also determines which attributes are safe and which are not. In particular,
given a scenario, if an attribute appears in the corresponding attribute list in <code>scenarios()</code>
and the name is not prefixed with <code>!</code>, it is considered <em>safe</em>.</p>
<p>Because of the above change, Yii 2.0 no longer has "safe" and "unsafe" validators.</p>
<p>If your model only has one scenario (very common), you do not have to overwrite <code>scenarios()</code>,
and everything will still work like the 1.1 way.</p>
<p>To learn more about Yii 2.0 models refer to <a href="guide-en-model.html">Models</a> section of the guide.</p>
<h2>Controllers <a href="#controllers" name="controllers" class="hashlink">&para;</a></h2><p>The <code>render()</code> and <code>renderPartial()</code> methods now return the rendering results instead of directly
sending them out. You have to <code>echo</code> them explicitly, e.g., <code>echo $this-&gt;render(...);</code>.</p>
<p>To learn more about Yii 2.0 controllers refer to <a href="guide-en-controller.html">Controller</a> section of the guide.</p>
<h2>Widgets <a href="#widgets" name="widgets" class="hashlink">&para;</a></h2><p>Using a widget is more straightforward in 2.0. You mainly use the <code>begin()</code>, <code>end()</code> and <code>widget()</code>
methods of the <code>Widget</code> class. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;Note&nbsp;that&nbsp;you&nbsp;have&nbsp;to&nbsp;"echo"&nbsp;the&nbsp;result&nbsp;to&nbsp;display&nbsp;it<br /></span><span style="color: #007700">echo&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">Menu</span><span style="color: #007700">::</span><span style="color: #0000BB">widget</span><span style="color: #007700">([</span><span style="color: #DD0000">'items'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$items</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;Passing&nbsp;an&nbsp;array&nbsp;to&nbsp;initialize&nbsp;the&nbsp;object&nbsp;properties<br /></span><span style="color: #0000BB">$form&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">begin</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'options'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'form-horizontal'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fieldConfig'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'inputOptions'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'input-xlarge'</span><span style="color: #007700">]],<br />]);<br />...&nbsp;</span><span style="color: #0000BB">form&nbsp;inputs&nbsp;here&nbsp;</span><span style="color: #007700">...<br />\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">end</span><span style="color: #007700">();</span></code></pre>
<p>Previously in 1.1, you would have to enter the widget class names as strings via the <code>beginWidget()</code>,
<code>endWidget()</code> and <code>widget()</code> methods of <code>CBaseController</code>. The approach above gets better IDE support.</p>
<p>For more on widgets see the <a href="guide-en-view.html#widgets">View section</a>.</p>
<h2>Themes <a href="#themes" name="themes" class="hashlink">&para;</a></h2><p>Themes work completely different in 2.0. They are now based on a path map to "translate" a source
view into a themed view. For example, if the path map for a theme is
<code>['/web/views' =&gt; '/web/themes/basic']</code>, then the themed version for a view file
<code>/web/views/site/index.php</code> will be <code>/web/themes/basic/site/index.php</code>.</p>
<p>For this reason, theme can now be applied to any view file, even if a view rendered outside
of the context of a controller or a widget.</p>
<p>There is no more <code>CThemeManager</code>. Instead, <code>theme</code> is a configurable property of the "view"
application component.</p>
<p>For more on themes see the <a href="guide-en-theming.html">Theming section</a>.</p>
<h2>Console Applications <a href="#console-applications" name="console-applications" class="hashlink">&para;</a></h2><p>Console applications are now composed by controllers, like Web applications. In fact,
console controllers and Web controllers share the same base controller class.</p>
<p>Each console controller is like <code>CConsoleCommand</code> in 1.1. It consists of one or several
actions. You use the <code>yii &lt;route&gt;</code> command to execute a console command, where <code>&lt;route&gt;</code>
stands for a controller route (e.g. <code>sitemap/index</code>). Additional anonymous arguments
are passed as the parameters to the corresponding controller action method, and named arguments
are treated as global options declared in <code>globalOptions()</code>.</p>
<p>Yii 2.0 supports automatic generation of command help information from comment blocks.</p>
<p>For more on console applications see the <a href="guide-en-console.html">Console section</a>.</p>
<h2>I18N <a href="#i18n" name="i18n" class="hashlink">&para;</a></h2><p>Yii 2.0 removes date formatter and number formatter in favor of the PECL intl PHP module.</p>
<p>Message translation is still supported, but managed via the "i18n" application component.
The component manages a set of message sources, which allows you to use different message
sources based on message categories. For more information, see the class documentation for <a href="guide-en-i18n.html">I18N</a>.</p>
<h2>Action Filters <a href="#action-filters" name="action-filters" class="hashlink">&para;</a></h2><p>Action filters are implemented via behaviors now. You should extend from <code>ActionFilter</code> to
define a new filter. To use a filter, you should attach the filter class to the controller
as a behavior. For example, to use the <code>AccessControl</code> filter, you should have the following
code in a controller:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'access'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\web\AccessControl'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'rules'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'allow'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'actions'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'admin'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'roles'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'@'</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br />}</span></code></pre>
<p>For more on action filters see the <a href="guide-en-controller.html#action-filters">Controller section</a>.</p>
<h2>Assets <a href="#assets" name="assets" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces a new concept called <em>asset bundle</em>. It is similar to script
packages (managed by <code>CClientScript</code>) in 1.1, but with better support.</p>
<p>An asset bundle is a collection of asset files (e.g. JavaScript files, CSS files, image files, etc.)
under a directory. Each asset bundle is represented as a class extending <code>AssetBundle</code>.
By registering an asset bundle via <code>AssetBundle::register()</code>, you will be able to make
the assets in that bundle accessible via Web, and the current page will automatically
contain the references to the JavaScript and CSS files specified in that bundle.</p>
<p>To learn more about assets see the <a href="guide-en-assets.html">asset manager documentation</a>.</p>
<h2>Static Helpers <a href="#static-helpers" name="static-helpers" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces many commonly used static helper classes, such as <code>Html</code>, <code>ArrayHelper</code>,
<code>StringHelper</code>. These classes are designed to be easily extended. Note that static classes
are usually hard to extend because of the fixed class name references. But Yii 2.0
introduces the class map (via <code>Yii::$classMap</code>) to overcome this difficulty.</p>
<h2><code>ActiveForm</code> <a href="#activeform" name="activeform" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces the <em>field</em> concept for building a form using <code>ActiveForm</code>. A field
is a container consisting of a label, an input, an error message, and/or a hint text.
It is represented as an <code>ActiveField</code> object. Using fields, you can build a form more cleanly than before:</p>
<pre><code class="language-php"><span style="color: #0000BB">&lt;?php&nbsp;$form&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">begin</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">field</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">field</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">passwordInput</span><span style="color: #007700">()&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="form-group"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;Html</span><span style="color: #007700">::</span><span style="color: #0000BB">submitButton</span><span style="color: #007700">(</span><span style="color: #DD0000">'Login'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br /><span style="color: #0000BB">&lt;?php&nbsp;yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">end</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span></code></pre>
<h2>Query Builder <a href="#query-builder" name="query-builder" class="hashlink">&para;</a></h2><p>In 1.1, query building is scattered among several classes, including <code>CDbCommand</code>,
<code>CDbCriteria</code>, and <code>CDbCommandBuilder</code>. Yii 2.0 uses <code>Query</code> to represent a DB query
and <code>QueryBuilder</code> to generate SQL statements from query objects. For example:</p>
<pre><code class="language-php"><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">(</span><span style="color: #DD0000">'id,&nbsp;name'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">from</span><span style="color: #007700">(</span><span style="color: #DD0000">'tbl_user'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sql</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$rows&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">();</span></code></pre>
<p>Best of all, such query building methods can be used together with <code>ActiveRecord</code>,
as explained in the next sub-section.</p>
<h2>ActiveRecord <a href="#activerecord" name="activerecord" class="hashlink">&para;</a></h2><p>ActiveRecord has undergone significant changes in Yii 2.0. The most important one
is the relational ActiveRecord query. In 1.1, you have to declare the relations
in the <code>relations()</code> method. In 2.0, this is done via getter methods that return
an <code>ActiveQuery</code> object. For example, the following method declares an "orders" relation:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Customer&nbsp;</span><span style="color: #007700">extends&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveRecord<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">getOrders</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'Order'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'customer_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>You can use <code>$customer-&gt;orders</code> to access the customer's orders. You can also
use <code>$customer-&gt;getOrders()-&gt;andWhere('status=1')-&gt;all()</code> to perform on-the-fly
relational query with customized query conditions.</p>
<p>When loading relational records in an eager way, Yii 2.0 does it differently from 1.1.
In particular, in 1.1 a JOIN query would be used to bring both the primary and the relational
records; while in 2.0, two SQL statements are executed without using JOIN: the first
statement brings back the primary records and the second brings back the relational records
by filtering with the primary keys of the primary records.</p>
<p>Yii 2.0 no longer uses the <code>model()</code> method when performing queries. Instead, you
use the <code>find()</code> method:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;to&nbsp;retrieve&nbsp;all&nbsp;*active*&nbsp;customers&nbsp;and&nbsp;order&nbsp;them&nbsp;by&nbsp;their&nbsp;ID:<br /></span><span style="color: #0000BB">$customers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Customer</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">where</span><span style="color: #007700">([</span><span style="color: #DD0000">'status'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$active</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">orderBy</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">all</span><span style="color: #007700">();<br /></span><span style="color: #FF8000">//&nbsp;return&nbsp;the&nbsp;customer&nbsp;whose&nbsp;PK&nbsp;is&nbsp;1<br /></span><span style="color: #0000BB">$customer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Customer</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);</span></code></pre>
<p>The <code>find()</code> method returns an instance of <code>ActiveQuery</code> which is a subclass of <code>Query</code>.
Therefore, you can use all query methods of <code>Query</code>.</p>
<p>Instead of returning ActiveRecord objects, you may call <code>ActiveQuery::asArray()</code> to
return results in terms of arrays. This is more efficient and is especially useful
when you need to return a large number of records:</p>
<pre><code class="language-php"><span style="color: #0000BB">$customers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Customer</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">asArray</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">all</span><span style="color: #007700">();</span></code></pre>
<p>By default, ActiveRecord now only saves dirty attributes. In 1.1, all attributes
are saved to database when you call <code>save()</code>, regardless of having changed or not,
unless you explicitly list the attributes to save.</p>
<p>See <a href="guide-en-active-record.html">active record docs</a> for more details.</p>
<h2>Auto-quoting Table and Column Names <a href="#auto-quoting-table-and-column-names" name="auto-quoting-table-and-column-names" class="hashlink">&para;</a></h2><p>Yii 2.0 supports automatic quoting of database table and column names. A name enclosed
within double curly brackets is treated as a table name, and a name enclosed within
double square brackets is treated as a column name. They will be quoted according to
the database driver being used:</p>
<pre><code class="language-php"><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$connection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;[[id]]&nbsp;FROM&nbsp;{{posts}}'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sql</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;MySQL:&nbsp;SELECT&nbsp;`id`&nbsp;FROM&nbsp;`posts`</span></code></pre>
<p>This feature is especially useful if you are developing an application that supports
different DBMS.</p>
<h2>User and IdentityInterface <a href="#user-and-identityinterface" name="user-and-identityinterface" class="hashlink">&para;</a></h2><p>The <code>CWebUser</code> class in 1.1 is now replaced by <code>\yii\Web\User</code>, and there is no more
<code>CUserIdentity</code> class. Instead, you should implement the <code>IdentityInterface</code> which
is much more straightforward to implement. The bootstrap application provides such an example.</p>
<h2>URL Management <a href="#url-management" name="url-management" class="hashlink">&para;</a></h2><p>URL management is similar to 1.1. A major enhancement is that it now supports optional
parameters. For example, if you have rule declared as follows, then it will match
both <code>post/popular</code> and <code>post/1/popular</code>. In 1.1, you would have to use two rules to achieve
the same goal.</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pattern'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'post/&lt;page:\d+&gt;/&lt;tag&gt;'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'route'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'post/index'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'defaults'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'page'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],<br />]</span></code></pre>
<p>More details in the <a href="guide-en-url.html">Url manager docs</a>.</p>
<h2>Response <a href="#response" name="response" class="hashlink">&para;</a></h2><p>TBD</p>
<h2>Extensions <a href="#extensions" name="extensions" class="hashlink">&para;</a></h2><p>TBD</p>
<h2>Integration with Composer <a href="#integration-with-composer" name="integration-with-composer" class="hashlink">&para;</a></h2><p>Yii is fully inegrated with the package manager for PHP named Composer that resolves dependencies, keeps your code
up to date updating it semi-automatically and manages autoloading for third party libraries no matter which autoloading
these are using.</p>
<p>In order to learn more refer to <a href="guide-en-composer.html">composer</a> and <a href="guide-en-installation.html">installation</a> sections of the guide.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Mon, 19 Jan 2015 02:32:13 +0700</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>

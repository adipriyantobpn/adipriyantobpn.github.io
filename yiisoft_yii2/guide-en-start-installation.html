<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/4b76110e/css/bootstrap.css" rel="stylesheet">
<link href="./assets/710de68d/style.css" rel="stylesheet">
<script src="./assets/75e46bf0/jquery.js"></script>
<script src="./assets/4b76110e/js/bootstrap.js"></script>
<script src="./assets/a44c75fa/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w916" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w916-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii Framework 2.0 API Documentation</a></div><div id="w916-collapse" class="collapse navbar-collapse"><ul id="w917" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li><a href="./guide-en-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-900" data-toggle="collapse" data-parent="#navigation">Introduction <b class="caret"></b></a><div id="navigation-900" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-intro-yii.html">About Yii</a>
<a class="list-group-item" href="./guide-en-intro-upgrade-from-v1.html">Upgrading from Version 1.1</a></div>
<a class="list-group-item active" href="#navigation-901" data-toggle="collapse" data-parent="#navigation">Getting Started <b class="caret"></b></a><div id="navigation-901" class="submenu panel-collapse collapse in"><a class="list-group-item active" href="./guide-en-start-installation.html">Installing Yii</a>
<a class="list-group-item" href="./guide-en-start-workflow.html">Running Applications</a>
<a class="list-group-item" href="./guide-en-start-hello.html">Saying Hello</a>
<a class="list-group-item" href="./guide-en-start-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-en-start-databases.html">Working with Databases</a>
<a class="list-group-item" href="./guide-en-start-gii.html">Generating Code with Gii</a>
<a class="list-group-item" href="./guide-en-start-looking-ahead.html">Looking Ahead</a></div>
<a class="list-group-item" href="#navigation-902" data-toggle="collapse" data-parent="#navigation">Application Structure <b class="caret"></b></a><div id="navigation-902" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-structure-overview.html">Overview</a>
<a class="list-group-item" href="./guide-en-structure-entry-scripts.html">Entry Scripts</a>
<a class="list-group-item" href="./guide-en-structure-applications.html">Applications</a>
<a class="list-group-item" href="./guide-en-structure-application-components.html">Application Components</a>
<a class="list-group-item" href="./guide-en-structure-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-en-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-en-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-en-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-en-structure-filters.html">Filters</a>
<a class="list-group-item" href="./guide-en-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-en-structure-assets.html">Assets</a>
<a class="list-group-item" href="./guide-en-structure-extensions.html">Extensions</a></div>
<a class="list-group-item" href="#navigation-903" data-toggle="collapse" data-parent="#navigation">Handling Requests <b class="caret"></b></a><div id="navigation-903" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-en-runtime-routing.html">Routing</a>
<a class="list-group-item" href="./guide-en-runtime-requests.html">Requests</a>
<a class="list-group-item" href="./guide-en-runtime-responses.html">Responses</a>
<a class="list-group-item" href="./guide-en-runtime-sessions-cookies.html">Sessions and Cookies</a>
<a class="list-group-item" href="./guide-en-runtime-url-handling.html">URL Parsing and Generation</a>
<a class="list-group-item" href="./guide-en-runtime-handling-errors.html">Handling Errors</a>
<a class="list-group-item" href="./guide-en-runtime-logging.html">Logging</a></div>
<a class="list-group-item" href="#navigation-904" data-toggle="collapse" data-parent="#navigation">Key Concepts <b class="caret"></b></a><div id="navigation-904" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-concept-components.html">Components</a>
<a class="list-group-item" href="./guide-en-concept-properties.html">Properties</a>
<a class="list-group-item" href="./guide-en-concept-events.html">Events</a>
<a class="list-group-item" href="./guide-en-concept-behaviors.html">Behaviors</a>
<a class="list-group-item" href="./guide-en-concept-configurations.html">Configurations</a>
<a class="list-group-item" href="./guide-en-concept-aliases.html">Aliases</a>
<a class="list-group-item" href="./guide-en-concept-autoloading.html">Class Autoloading</a>
<a class="list-group-item" href="./guide-en-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-en-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-905" data-toggle="collapse" data-parent="#navigation">Working with Databases <b class="caret"></b></a><div id="navigation-905" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-db-dao.html">Data Access Objects</a>
<a class="list-group-item" href="./guide-en-db-query-builder.html">Query Builder</a>
<a class="list-group-item" href="./guide-en-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-en-db-migrations.html">Migrations</a>
<a class="list-group-item" href="./guide-en-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-en-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-en-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-en-db-elastic-search.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-906" data-toggle="collapse" data-parent="#navigation">Getting Data from Users <b class="caret"></b></a><div id="navigation-906" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-input-forms.html">Creating Forms</a>
<a class="list-group-item" href="./guide-en-input-validation.html">Validating Input</a>
<a class="list-group-item" href="./guide-en-input-file-upload.html">Uploading Files</a>
<a class="list-group-item" href="./guide-en-input-multiple-models.html">Getting Data for Multiple Models</a></div>
<a class="list-group-item" href="#navigation-907" data-toggle="collapse" data-parent="#navigation">Displaying Data <b class="caret"></b></a><div id="navigation-907" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-output-formatting.html">Data Formatting</a>
<a class="list-group-item" href="./guide-en-output-pagination.html">Pagination</a>
<a class="list-group-item" href="./guide-en-output-sorting.html">Sorting</a>
<a class="list-group-item" href="./guide-en-output-data-providers.html">Data Providers</a>
<a class="list-group-item" href="./guide-en-output-data-widgets.html">Data Widgets</a>
<a class="list-group-item" href="./guide-en-output-client-scripts.html">Working with Client Scripts</a>
<a class="list-group-item" href="./guide-en-output-theming.html">Theming</a></div>
<a class="list-group-item" href="#navigation-908" data-toggle="collapse" data-parent="#navigation">Security <b class="caret"></b></a><div id="navigation-908" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-security-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-en-security-authorization.html">Authorization</a>
<a class="list-group-item" href="./guide-en-security-passwords.html">Working with Passwords</a>
<a class="list-group-item" href="./guide-en-security-auth-clients.html">Auth Clients</a>
<a class="list-group-item" href="./guide-en-security-best-practices.html">Best Practices</a></div>
<a class="list-group-item" href="#navigation-909" data-toggle="collapse" data-parent="#navigation">Caching <b class="caret"></b></a><div id="navigation-909" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-caching-overview.html">Overview</a>
<a class="list-group-item" href="./guide-en-caching-data.html">Data Caching</a>
<a class="list-group-item" href="./guide-en-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-en-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-en-caching-http.html">HTTP Caching</a></div>
<a class="list-group-item" href="#navigation-910" data-toggle="collapse" data-parent="#navigation">RESTful Web Services <b class="caret"></b></a><div id="navigation-910" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-rest-quick-start.html">Quick Start</a>
<a class="list-group-item" href="./guide-en-rest-resources.html">Resources</a>
<a class="list-group-item" href="./guide-en-rest-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-en-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-en-rest-response-formatting.html">Response Formatting</a>
<a class="list-group-item" href="./guide-en-rest-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-en-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-en-rest-versioning.html">Versioning</a>
<a class="list-group-item" href="./guide-en-rest-error-handling.html">Error Handling</a></div>
<a class="list-group-item" href="#navigation-911" data-toggle="collapse" data-parent="#navigation">Development Tools <b class="caret"></b></a><div id="navigation-911" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-tool-debugger.html">Debug Toolbar and Debugger</a>
<a class="list-group-item" href="./guide-en-tool-gii.html">Generating Code using Gii</a>
<a class="list-group-item" href="./guide-en-tool-api-doc.html">Generating API Documentation</a></div>
<a class="list-group-item" href="#navigation-912" data-toggle="collapse" data-parent="#navigation">Testing <b class="caret"></b></a><div id="navigation-912" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-test-overview.html">Overview</a>
<a class="list-group-item" href="./guide-en-test-endvironment-setup.html">Testing environment setup</a>
<a class="list-group-item" href="./guide-en-test-unit.html">Unit Tests</a>
<a class="list-group-item" href="./guide-en-test-functional.html">Functional Tests</a>
<a class="list-group-item" href="./guide-en-test-acceptance.html">Acceptance Tests</a>
<a class="list-group-item" href="./guide-en-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item" href="#navigation-913" data-toggle="collapse" data-parent="#navigation">Special Topics <b class="caret"></b></a><div id="navigation-913" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-tutorial-advanced-app.html">Advanced Application Template</a>
<a class="list-group-item" href="./guide-en-tutorial-start-from-scratch.html">Building Application from Scratch</a>
<a class="list-group-item" href="./guide-en-tutorial-console.html">Console Commands</a>
<a class="list-group-item" href="./guide-en-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-en-tutorial-i18n.html">Internationalization</a>
<a class="list-group-item" href="./guide-en-tutorial-mailing.html">Mailing</a>
<a class="list-group-item" href="./guide-en-tutorial-performance-tuning.html">Performance Tuning</a>
<a class="list-group-item" href="./guide-en-tutorial-shared-hosting.html">Shared Hosting Environment</a>
<a class="list-group-item" href="./guide-en-tutorial-template-engines.html">Template Engines</a>
<a class="list-group-item" href="./guide-en-tutorial-yii-integration.html">Working with Third-Party Code</a></div>
<a class="list-group-item" href="#navigation-914" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-914" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-en-widget-jui.html">Jquery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-915" data-toggle="collapse" data-parent="#navigation">Helpers <b class="caret"></b></a><div id="navigation-915" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-en-helper-overview.html">Overview</a>
<a class="list-group-item" href="./guide-en-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-en-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-en-helper-url.html">Url</a>
<a class="list-group-item" href="./guide-en-helper-security.html">Security</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Installing Yii <a href="#installing-yii" name="installing-yii" class="hashlink">&para;</a></h1><p>You can install Yii in two ways, using <a href="http://getcomposer.org/">Composer</a> or by downloading an archive file.
The former is the preferred way, as it allows you to install new <a href="guide-en-extend-creating-extensions.html">extensions</a> or update Yii by simply running a single command.</p>
<blockquote><p>Note: Unlike with Yii 1, standard installations of Yii 2 results in both the framework and an application skeleton being downloaded and installed.</p>
</blockquote>
<h2>Installing via Composer <a name="installing-via-composer"></a> <a href="#installing-via-composer" name="installing-via-composer" class="hashlink">&para;</a></h2><p>If you do not already have Composer installed, you may do so by following the instructions at
<a href="https://getcomposer.org/download/">getcomposer.org</a>. On Linux and Mac OS X, you'll run the following commands:</p>
<pre><code>curl -s http://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer
</code></pre>
<p>On Windows, you'll download and run <a href="https://getcomposer.org/Composer-Setup.exe">Composer-Setup.exe</a>.</p>
<p>Please refer to the <a href="https://getcomposer.org/doc/">Composer Documentation</a> if you encounter any
problems or want to learn more about Composer usage.</p>
<p>With Composer installed, you can install Yii by running the following commands under a Web-accessible folder:</p>
<pre><code>composer global require "fxp/composer-asset-plugin:1.0.0-beta2"
composer create-project --prefer-dist yiisoft/yii2-app-basic basic
</code></pre>
<p>The first command installs the <a href="https://github.com/francoispluchino/composer-asset-plugin/">composer asset plugin</a>
which allows managing bower and npm package dependencies through composer. You only need to run this command
once for all. The second command installs Yii in a directory named <code>basic</code>.</p>
<blockquote><p>Tip: If you want to install the latest development version of Yii, you may use the following command,
which adds a <a href="https://getcomposer.org/doc/04-schema.md#minimum-stability">stability option</a>:</p>
<pre><code>composer create-project --prefer-dist --stability=dev yiisoft/yii2-app-basic basic
</code></pre>
<p>Note that the development version of Yii should not be used for production as it may break your running code.</p>
</blockquote>
<h2>Installing from an Archive File <a name="installing-from-archive-file"></a> <a href="#installing-from-an-archive-file" name="installing-from-an-archive-file" class="hashlink">&para;</a></h2><p>Installing Yii from an archive file involves two steps:</p>
<ol>
<li>Download the archive file from <a href="http://www.yiiframework.com/download/yii2-basic">yiiframework.com</a>.</li>
<li>Unpack the downloaded file to a Web-accessible folder.</li>
<li><p>Modify the <code>config/web.php</code> file by entering a secret key for the <code>cookieValidationKey</code> configuration item
(this is done automatically if you are installing Yii using Composer):</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;!!!&nbsp;insert&nbsp;a&nbsp;secret&nbsp;key&nbsp;in&nbsp;the&nbsp;following&nbsp;(if&nbsp;it&nbsp;is&nbsp;empty)&nbsp;-&nbsp;this&nbsp;is&nbsp;required&nbsp;by&nbsp;cookie&nbsp;validation<br /></span><span style="color: #DD0000">'cookieValidationKey'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'enter&nbsp;your&nbsp;secret&nbsp;key&nbsp;here'</span><span style="color: #007700">,</span></code></pre>
</li>
</ol>
<h2>Other Installation Options <a name="other-installation-options"></a> <a href="#other-installation-options" name="other-installation-options" class="hashlink">&para;</a></h2><p>The above installation instructions show how to install Yii, which also creates a basic Web application that works out of the box.
This approach is a good starting point for small projects, or for when you just start learning Yii.</p>
<p>But there are other installation options available:</p>
<ul>
<li>If you only want to install the core framework and would like to build an entire  application from scratch,
you may follow the instructions as explained in <a href="guide-en-tutorial-start-from-scratch.html">Building Application from Scratch</a>.</li>
<li>If you want to start with a more sophisticated application, better suited to team development environments,
you may consider installing the <a href="guide-en-tutorial-advanced-app.html">Advanced Application Template</a>.</li>
</ul>
<h2>Verifying the Installation <a name="verifying-installation"></a> <a href="#verifying-the-installation" name="verifying-the-installation" class="hashlink">&para;</a></h2><p>After installation, you can use your browser to access the installed Yii application with the following URL:</p>
<pre><code>http://localhost/basic/web/index.php
</code></pre>
<p>This URL assumes you have installed Yii in a directory named <code>basic</code>, directly under the Web server's document root directory,
and that the Web server is running on your local machine (<code>localhost</code>). You may need to adjust it to your installation environment.</p>
<p><img src="images/start-app-installed.png" alt="Successful Installation of Yii" /></p>
<p>You should see the above "Congratulations!" page in your browser. If not, please check if your PHP installation satisfies
Yii's requirements. You can check if the minimum requirements are met using one of the following approaches:</p>
<ul>
<li>Use a browser to access the URL <code>http://localhost/basic/requirements.php</code></li>
<li><p>Run the following commands:</p>
<pre><code>cd basic
php requirements.php
</code></pre>
</li>
</ul>
<p>You should configure your PHP installation so that it meets the minimum requirements of Yii. Most importantly, you should have PHP 5.4 or above. You should also install
the <a href="http://www.php.net/manual/en/pdo.installation.php">PDO PHP Extension</a> and a corresponding database driver
(such as <code>pdo_mysql</code> for MySQL databases), if your application needs a database.</p>
<h2>Configuring Web Servers <a name="configuring-web-servers"></a> <a href="#configuring-web-servers" name="configuring-web-servers" class="hashlink">&para;</a></h2><blockquote><p>Info: You may skip this subsection for now if you are just test driving Yii with no intention
  of deploying it to a production server.</p>
</blockquote>
<p>The application installed according to the above instructions should work out of box with either
an <a href="http://httpd.apache.org/">Apache HTTP server</a> or an <a href="http://nginx.org/">Nginx HTTP server</a>, on
Windows, Mac OS X, or Linux running PHP 5.4 or higher. Yii 2.0 is also compatible the facebooks
<a href="http://hhvm.com/">HHVM</a> however there are some edge cases where HHVM behaves different than native
PHP so you have to take some extra care when using HHVM.</p>
<p>On a production server, you may want to configure your Web server so that the application can be accessed
via the URL <code>http://www.example.com/index.php</code> instead of <code>http://www.example.com/basic/web/index.php</code>. Such configuration
requires pointing the document root of your Web server to the <code>basic/web</code> folder. You may also
want to hide <code>index.php</code> from the URL, as described in the <a href="guide-en-runtime-url-handling.html">URL Parsing and Generation</a> section.
In this subsection, you'll learn how to configure your Apache or Nginx server to achieve these goals.</p>
<blockquote><p>Info: By setting <code>basic/web</code> as the document root, you also prevent end users from accessing
your private application code and sensitive data files that are stored in the sibling directories
of <code>basic/web</code>. Denying access to those other folders is a security improvement.</p>
</blockquote>
<blockquote><p>Info: If your application will run in a shared hosting environment where you do not have permission
to modify its Web server configuration, you may still adjust the structure of your application for better security. Please refer to
the <a href="guide-en-tutorial-shared-hosting.html">Shared Hosting Environment</a> section for more details.</p>
</blockquote>
<h3>Recommended Apache Configuration <a name="recommended-apache-configuration"></a> <a href="#recommended-apache-configuration" name="recommended-apache-configuration" class="hashlink">&para;</a></h3><p>Use the following configuration in Apache's <code>httpd.conf</code> file or within a virtual host configuration. Note that you
should replace <code>path/to/basic/web</code> with the actual path for <code>basic/web</code>.</p>
<pre><code># Set document root to be "basic/web"
DocumentRoot "path/to/basic/web"

&lt;Directory "path/to/basic/web"&gt;
    RewriteEngine on

    # If a directory or a file exists, use the request directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    # Otherwise forward the request to index.php
    RewriteRule . index.php

    # ...other settings...
&lt;/Directory&gt;
</code></pre>
<h3>Recommended Nginx Configuration <a name="recommended-nginx-configuration"></a> <a href="#recommended-nginx-configuration" name="recommended-nginx-configuration" class="hashlink">&para;</a></h3><p>You should have installed PHP as an <a href="http://php.net/install.fpm">FPM SAPI</a> to use <a href="http://wiki.nginx.org/">Nginx</a>.
Use the following Nginx configuration, replacing <code>path/to/basic/web</code> with the actual path for <code>basic/web</code> and <code>mysite.local</code> with
the actual hostname to serve.</p>
<pre><code>server {
    charset utf-8;
    client_max_body_size 128M;

    listen 80; ## listen for ipv4
    #listen [::]:80 default_server ipv6only=on; ## listen for ipv6

    server_name mysite.local;
    root        /path/to/basic/web;
    index       index.php;

    access_log  /path/to/basic/log/access.log main;
    error_log   /path/to/basic/log/error.log;

    location / {
        # Redirect everything that isn't a real file to index.php
        try_files $uri $uri/ /index.php?$args;
    }

    # uncomment to avoid processing of calls to non-existing static files by Yii
    #location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {
    #    try_files $uri =404;
    #}
    #error_page 404 /404.html;

    location ~ \.php$ {
        include fastcgi.conf;
        fastcgi_pass   127.0.0.1:9000;
        #fastcgi_pass unix:/var/run/php5-fpm.sock;
        try_files $uri =404;
    }

    location ~ /\.(ht|svn|git) {
        deny all;
    }
}
</code></pre>
<p>When using this configuration, you should also set <code>cgi.fix_pathinfo=0</code> in the <code>php.ini</code> file
in order to avoid many unnecessary system <code>stat()</code> calls.</p>
<p>Also note that when running an HTTPS server, you need to add <code>fastcgi_param HTTPS on;</code> so that Yii
can properly detect if a connection is secure.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Mon, 19 Jan 2015 03:33:39 +0700</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
